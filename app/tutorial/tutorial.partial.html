<div class="row">
	<div class="col-sm-3 col-md-2 sidebar">
		<ol class="nav nav-sidebar">
			<li du-scrollspy="credentials"><a du-smooth-scroll="credentials">Setup AWS Credentials</a></li>
			<li du-scrollspy="createQueue"><a du-smooth-scroll="createQueue">Create Work Queue</a></li>
			<li du-scrollspy="tasks"><a du-smooth-scroll="tasks">Setup Tasks</a></li>
			<li du-scrollspy="s3Source"><a du-smooth-scroll="s3Source">S3 Source Bucket Setup</a></li>
			<li du-scrollspy="s3Destination"><a du-smooth-scroll="s3Destination">S3 Destination Bucket Setup</a></li>
			<li du-scrollspy="workers"><a du-smooth-scroll="workers">Start Workers</a></li>
			<li du-scrollspy="dashboard"><a du-smooth-scroll="dashboard">Monitor Job Status</a></li>
		</ol>
	</div>
	<div class="col-sm-9 col-sm-offset-3 col-md-10 col-md-offset-2 main">
		<h3>Brenda-Web Tutorial</h3>
		<p class="lead">
			This tutorial will demonstrate the process for setting up AWS, submitting jobs and monitoring their progress.
		</p>
		
		<p>
			We assume you already have an AWS account and, for the sake of this tutorial, that it is brand new with nothing
			configured.  If you have previously used Brenda, some of the steps may not be required.  In general, the tool
			and configurations will happily live along side any other unrelated AWS resources without issues.  If you'd like
			further isolation, AWS allows for the creation of linked accounts.  The configuration of linked accounts is beyond
			the scope of this tutorial but additional details can be found 
			<a href="http://docs.aws.amazon.com/awsaccountbilling/latest/aboutv2/consolidated-billing.html" target="_blank">here</a>.
		</p>
		
		<p>
			To completely understand what is happening in this tutorial, we recommend logging in to the AWS console and observing the 
			changes being made and resources being utilized.
		</p>
		
		<p>
			To assist with managing files in S3 buckets, a number of tools are available for uploading/downloading files from your S3
			buckets.  For the sake of this tutorial we utilize the <a href="https://aws.amazon.com/cli/" target="_blank">AWS CLI</a> 
			tool however any tool of choice can be leveraged, including the AWS web interface.
		</p>
		
		<section id="credentials">
			<h3>Setup AWS Credentials</h3>
			<p>
				<div class="row">
					<div class="col-lg-8">
						To allow Brenda-Web access to create and access your AWS account and its resources, it needs to be given credentials
						that are linked to your account.  To begin, log in to the AWS web interface and click on <strong>"Identity & Access Management"</strong>
						found under <strong>"Security & Identity"</strong>
					</div>
					<div class="col-lg-4">
						<img src="tutorial/res/credentials_IAM.png" class="img-responsive" alt="Identity and Access Management"/>
					</div>
				</div>
			</p>
			
			<p>
				Click on the <strong>Users</strong> link which will take you to a list of the current users configured for this 
				account.  For fresh accounts, there should be a single user.  For the sake of simplicity, we'll leverage the 
				existing user.  If you so desire, you may create a new user or isolated linked accounts but doing so is beyond
				the scope of this tutorial.
			</p>
			
			<p>
				Click on the user you'd like to use, then click on the <strong>Security Credentials</strong> tab.
			</p>
			
			<p>
				You should now see a <strong>Create Access Key</strong> button, click on it.
			</p>
			
			<p>
				A dialog will open with your security credentials.  You may display them in the dialog or optionally download them
				to a CSV file.  Note that once the dialog is closed, the credentials will no longer be accessible so make sure to
				grab them and place them somewhere secure.
			</p>
			
			<p>
				At the top of the Brenda-Web page, click on the <strong>AWS Config</strong> button.  This will open a dialog in which
				the AWS credentials should be inserted.  Place the access key ID and secret into their corresponding boxes in the dialog.
			</p>
			
			<p>
				For this tutorial, enter the value <code>us-east-1</code> in the <strong>AWS Region</strong> text box.  For more information
				on what region means, refer to the AWS
				<a href="http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/using-regions-availability-zones.html" target="_blank">Regions and Availability Zones</a>
				documentation.
			</p>
			
			<p>
				Once all three text boxes are populated, click the <strong>Set Credentials</strong> button.  This will trigger a series
				of checks to be performed to ensure credentials are valid.  If this is the first time using the tool, you'll likely get
				an error saying the security group was not found, clicking on the <strong>Fix it</strong> link in the error message will
				cause the necessary security group to be created.  Once the group is created, the checks will rerun and everything should
				be successful at this point.
			</p>
			
			<p>
				Click <strong>Done</strong> to dismiss the dialog.
			</p>
			
		</section>
		<section id="createQueue">
			<h3>Create Work Queue</h3>
			
			<p>
				The work queue serves as a list of tasks that the workers will pull from.  Create a new one by clicking the
				<span class="glyphicon glyphicon-plus" hide-aria="true"></span> icon.
			</p>
			
			<p>
				You'll be presented with a dialog prompting for a name for your new queue.  Enter a name of your choosing and
				click <strong>OK</strong>.
			</p>
			
			<p>
				It may take up to 60 seconds for the queue to appear in the drop down list, once it does, select it.
			</p>
			
		</section>
		<section id="tasks">
			<h3>Setup Tasks</h3>
			
			<p>
				We'll now populate the work queue with a list of tasks.  For this, we leverage a work template which defines
				the basic structure of the tasks.  The template is expanded to a list of tasks by specifying the start and end 
				frames.  The default template is:
			</p>
			<p>
				<code>blender -b *.blend -F PNG -o $OUTDIR/frame_###### -s $START -e $END -j $STEP -t 0 -a</code>
			</p>
			<p>
				This template tells the workers to render each frame of the project as a single task.  The start and end frame
				inputs specify which frames are to be rendered.  Set the values as appropriate for the start and end frames.  The
				<strong>Work List</strong> shows the expanded list of tasks that will be enqueued.
			</p>
			
			<p>
				Once the template, start frame and end frame are configured as desired, click the <strong>Queue Work</strong>
				button.  This will send the tasks to the selected queue and the progress bar will be updated to reflect the
				status.
			</p>
			
			<p>
				The current size of the queue can be seen below the queue selection drop down.  If a mistake was made, you may use the
				<strong>Clear Queue</strong> button to clear all tasks from the queue.
			</p>
			
		</section>
		<section id="s3Source">
			
		</section>
		<section id="s3Destination">
			
		</section>
		<section id="workers">
			
		</section>
		<section id="dashboard">
			
		</section>
	</div>
</div>
